<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>sigserver: SParts.h ソースファイル</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="doxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<!-- 作成： Doxygen 1.6.3 -->
<script type="text/javascript">
<!--
function changeDisplayState (e){
  var num=this.id.replace(/[^[0-9]/g,'');
  var button=this.firstChild;
  var sectionDiv=document.getElementById('dynsection'+num);
  if (sectionDiv.style.display=='none'||sectionDiv.style.display==''){
    sectionDiv.style.display='block';
    button.src='open.gif';
  }else{
    sectionDiv.style.display='none';
    button.src='closed.gif';
  }
}
function initDynSections(){
  var divs=document.getElementsByTagName('div');
  var sectionCounter=1;
  for(var i=0;i<divs.length-1;i++){
    if(divs[i].className=='dynheader'&&divs[i+1].className=='dynsection'){
      var header=divs[i];
      var section=divs[i+1];
      var button=header.firstChild;
      if (button!='IMG'){
        divs[i].insertBefore(document.createTextNode(' '),divs[i].firstChild);
        button=document.createElement('img');
        divs[i].insertBefore(button,divs[i].firstChild);
      }
      header.style.cursor='pointer';
      header.onclick=changeDisplayState;
      header.id='dynheader'+sectionCounter;
      button.src='closed.gif';
      section.id='dynsection'+sectionCounter;
      section.style.display='none';
      section.style.marginLeft='14px';
      sectionCounter++;
    }
  }
}
window.onload = initDynSections;
-->
</script>
<div class="navigation" id="top">
  <div class="tabs">
    <ul>
      <li><a href="main.html"><span>メインページ</span></a></li>
      <li><a href="namespaces.html"><span>ネームスペース</span></a></li>
      <li><a href="annotated.html"><span>クラス</span></a></li>
      <li class="current"><a href="files.html"><span>ファイル</span></a></li>
    </ul>
  </div>
  <div class="tabs">
    <ul>
      <li><a href="files.html"><span>ファイル一覧</span></a></li>
      <li><a href="globals.html"><span>ファイルメンバ</span></a></li>
    </ul>
  </div>
<h1>SParts.h</h1><a href="_s_parts_8h.html">説明を見る。</a><div class="fragment"><pre class="fragment"><a name="l00001"></a>00001 <span class="comment">/* $Id: _s_parts_8h_source.html,v 1.2 2011-12-14 07:55:38 okamoto Exp $ */</span>
<a name="l00002"></a>00002 <span class="preprocessor">#ifndef Parts_Server_h</span>
<a name="l00003"></a>00003 <span class="preprocessor"></span><span class="preprocessor">#define Parts_Server_h</span>
<a name="l00004"></a>00004 <span class="preprocessor"></span>
<a name="l00005"></a>00005 <span class="preprocessor">#ifdef EXEC_SIMULATION</span>
<a name="l00006"></a>00006 <span class="preprocessor"></span><span class="preprocessor">#include &lt;vector&gt;</span>
<a name="l00007"></a>00007 <span class="preprocessor">#include &quot;<a class="code" href="_logger_8h.html">Logger.h</a>&quot;</span>
<a name="l00008"></a>00008 
<a name="l00009"></a>00009 <span class="preprocessor">#include &quot;<a class="code" href="_parts_8h.html">Parts.h</a>&quot;</span>
<a name="l00010"></a>00010 <span class="preprocessor">#include &quot;<a class="code" href="_parts_cmpnt_8h.html">PartsCmpnt.h</a>&quot;</span>
<a name="l00011"></a>00011 
<a name="l00012"></a>00012 <span class="keyword">class </span><a class="code" href="class_joint.html" title="部品同士を繋ぐ関節クラス">Joint</a>;
<a name="l00013"></a>00013 <span class="comment"></span>
<a name="l00014"></a>00014 <span class="comment">/**</span>
<a name="l00015"></a>00015 <span class="comment"> * @brief エンティティの部品クラス(サーバサイドで使用)</span>
<a name="l00016"></a>00016 <span class="comment"> *</span>
<a name="l00017"></a>00017 <span class="comment"> * &lt;b&gt;このクラスで使用する語句の意味&lt;/b&gt;</span>
<a name="l00018"></a>00018 <span class="comment"> * &lt;dl&gt;</span>
<a name="l00019"></a>00019 <span class="comment"> * &lt;dt&gt;親ジョイント・パーツ&lt;/dt&gt;&lt;dd&gt;エージェントの中心部分(body)に繋がるジョイント・パーツ&lt;/dd&gt;</span>
<a name="l00020"></a>00020 <span class="comment"> * &lt;dt&gt;子ジョイント・パーツ&lt;/dt&gt;&lt;dd&gt;エージェントの中心部分とは逆方向のジョイント・パーツ&lt;/dd&gt;</span>
<a name="l00021"></a>00021 <span class="comment"> * &lt;/dl&gt;</span>
<a name="l00022"></a>00022 <span class="comment"> * @see CParts</span>
<a name="l00023"></a>00023 <span class="comment"> */</span>
<a name="l00024"></a><a class="code" href="class_s_parts.html">00024</a> <span class="keyword">class </span><a class="code" href="class_s_parts.html" title="エンティティの部品クラス(サーバサイドで使用)">SParts</a> : <span class="keyword">public</span> <a class="code" href="class_parts.html" title="エンティティを構成する部品クラス">Parts</a>
<a name="l00025"></a>00025 {
<a name="l00026"></a>00026  <span class="keyword">public</span>:
<a name="l00027"></a><a class="code" href="struct_s_parts_1_1_child.html">00027</a>     <span class="keyword">struct </span><a class="code" href="struct_s_parts_1_1_child.html">Child</a>
<a name="l00028"></a>00028     {
<a name="l00029"></a><a class="code" href="struct_s_parts_1_1_child.html#a950f6b7706ec2b5f39247bbd69a437bf">00029</a>         <a class="code" href="class_joint.html" title="部品同士を繋ぐ関節クラス">Joint</a> *<a class="code" href="struct_s_parts_1_1_child.html#a950f6b7706ec2b5f39247bbd69a437bf">currj</a>;
<a name="l00030"></a><a class="code" href="struct_s_parts_1_1_child.html#a311d07ed22d27b2affd0dbebd29e6441">00030</a>         <a class="code" href="class_joint.html" title="部品同士を繋ぐ関節クラス">Joint</a> *<a class="code" href="struct_s_parts_1_1_child.html#a311d07ed22d27b2affd0dbebd29e6441">nextj</a>;
<a name="l00031"></a><a class="code" href="struct_s_parts_1_1_child.html#a3eb62a2545080f06559dfff187f3871f">00031</a>         <a class="code" href="class_s_parts.html" title="エンティティの部品クラス(サーバサイドで使用)">SParts</a> *<a class="code" href="struct_s_parts_1_1_child.html#a3eb62a2545080f06559dfff187f3871f">nextp</a>;
<a name="l00032"></a>00032 
<a name="l00033"></a><a class="code" href="struct_s_parts_1_1_child.html#a622d7d31bc3f159dd5a35b99fdb0a87c">00033</a>         <a class="code" href="struct_s_parts_1_1_child.html#a622d7d31bc3f159dd5a35b99fdb0a87c">Child</a>(<a class="code" href="class_joint.html" title="部品同士を繋ぐ関節クラス">Joint</a> *cj, <a class="code" href="class_joint.html" title="部品同士を繋ぐ関節クラス">Joint</a> *nj, <a class="code" href="class_s_parts.html" title="エンティティの部品クラス(サーバサイドで使用)">SParts</a> *np) : <a class="code" href="struct_s_parts_1_1_child.html#a950f6b7706ec2b5f39247bbd69a437bf">currj</a>(cj), <a class="code" href="struct_s_parts_1_1_child.html#a311d07ed22d27b2affd0dbebd29e6441">nextj</a>(nj), <a class="code" href="struct_s_parts_1_1_child.html#a3eb62a2545080f06559dfff187f3871f">nextp</a>(np) {}
<a name="l00034"></a>00034     };
<a name="l00035"></a><a class="code" href="class_s_parts.html#a0b2fdbec815c0439c70e69e6c5780a69">00035</a>     <span class="keyword">typedef</span> std::vector&lt;Child *&gt; <a class="code" href="class_s_parts.html#a0b2fdbec815c0439c70e69e6c5780a69">ChildC</a>;
<a name="l00036"></a>00036 <span class="keyword">protected</span>:
<a name="l00037"></a><a class="code" href="class_s_parts.html#a97a39edb673802271c60812935dbf2e7">00037</a>     <a class="code" href="class_o_d_e_obj.html" title="ODEにおけるシミュレーションオブジェクトラッパークラス.">ODEObj</a> *    <a class="code" href="class_s_parts.html#a97a39edb673802271c60812935dbf2e7">m_odeobj</a>;
<a name="l00038"></a><a class="code" href="class_s_parts.html#adf018457dc724ddf503f4bcd08c1a411">00038</a>     <a class="code" href="class_sim_obj_base.html" title="シミュレーションエンティティ基本クラス">SimObjBase</a> *    <a class="code" href="class_s_parts.html#adf018457dc724ddf503f4bcd08c1a411">m_parent</a>;
<a name="l00039"></a><a class="code" href="class_s_parts.html#a4b84a104a54f33e8083bebb6c61b3163">00039</a>     <a class="code" href="class_joint.html" title="部品同士を繋ぐ関節クラス">Joint</a> *     <a class="code" href="class_s_parts.html#a4b84a104a54f33e8083bebb6c61b3163">m_parentJoint</a>;
<a name="l00040"></a><a class="code" href="class_s_parts.html#a40e9fd7d3eac554b651a9814bb757496">00040</a>     <a class="code" href="class_s_parts.html#a0b2fdbec815c0439c70e69e6c5780a69">ChildC</a>      <a class="code" href="class_s_parts.html#a40e9fd7d3eac554b651a9814bb757496">m_children</a>;
<a name="l00041"></a><a class="code" href="class_s_parts.html#a43b0004b0a0c4c55f8a96d68fa35b4d3">00041</a>     <span class="keywordtype">double</span>          <a class="code" href="class_s_parts.html#aebabba287b9e65fc22c7fac8585ac421">m_posx</a>, <a class="code" href="class_s_parts.html#a165bf34423e7c87262a948a8ba0fe4eb">m_posy</a>, <a class="code" href="class_s_parts.html#a43b0004b0a0c4c55f8a96d68fa35b4d3">m_posz</a>;
<a name="l00042"></a><a class="code" href="class_s_parts.html#a1b2a3bf3f998bd2df93e5ae4d14d2e3b">00042</a>     <span class="keywordtype">double</span>          <a class="code" href="class_s_parts.html#a1b2a3bf3f998bd2df93e5ae4d14d2e3b">m_mass</a>;
<a name="l00043"></a>00043 
<a name="l00044"></a>00044 <span class="keyword">protected</span>:<span class="comment"></span>
<a name="l00045"></a>00045 <span class="comment">    /**</span>
<a name="l00046"></a>00046 <span class="comment">     * @brief コンストラクタ</span>
<a name="l00047"></a>00047 <span class="comment">     * @param t     部品タイプ</span>
<a name="l00048"></a>00048 <span class="comment">     * @param name  部品名</span>
<a name="l00049"></a>00049 <span class="comment">     * @param pos   位置(エージェント座標系)</span>
<a name="l00050"></a>00050 <span class="comment">     */</span>
<a name="l00051"></a>00051     <a class="code" href="class_s_parts.html#acdb7082c2d1b0bd7d69cc0a2c9a096a1" title="コンストラクタ">SParts</a>(<a class="code" href="_parts_8h.html#a7c3aeaeaa817e70d68d9459826f84f1e">PartsType</a> t, <span class="keyword">const</span> <span class="keywordtype">char</span> *<a class="code" href="class_parts.html#af245eb5dd2bfcf0783634ec495bb4fa5" title="パーツ名の取得">name</a>, <span class="keyword">const</span> <a class="code" href="class_position.html" title="3次元位置クラス">Position</a> &amp;pos);
<a name="l00052"></a>00052 <span class="keyword">public</span>:
<a name="l00053"></a>00053     <span class="keyword">virtual</span> <a class="code" href="class_s_parts.html#a2e2ed4d1227844dab8ba48c22f129cba">‾SParts</a>();
<a name="l00054"></a>00054 <span class="comment"></span>
<a name="l00055"></a>00055 <span class="comment">    //! 親ジョイントを設定する</span>
<a name="l00056"></a><a class="code" href="class_s_parts.html#a7edcc3594e638f5a025d59597a87530c">00056</a> <span class="comment"></span>    <span class="keywordtype">void</span>    <a class="code" href="class_s_parts.html#a7edcc3594e638f5a025d59597a87530c" title="親ジョイントを設定する">setParentJoint</a>(<a class="code" href="class_joint.html" title="部品同士を繋ぐ関節クラス">Joint</a> *j)
<a name="l00057"></a>00057     {
<a name="l00058"></a>00058         <a class="code" href="class_s_parts.html#a4b84a104a54f33e8083bebb6c61b3163">m_parentJoint</a> = j;
<a name="l00059"></a>00059     }
<a name="l00060"></a>00060 <span class="comment"></span>
<a name="l00061"></a>00061 <span class="comment">    //! 親ジョイントを得る</span>
<a name="l00062"></a><a class="code" href="class_s_parts.html#af1ccc69f65cf00036109ebcf1c3aefd7">00062</a> <span class="comment"></span>    <a class="code" href="class_joint.html" title="部品同士を繋ぐ関節クラス">Joint</a> * <a class="code" href="class_s_parts.html#af1ccc69f65cf00036109ebcf1c3aefd7" title="親ジョイントを得る">getParentJoint</a>() { <span class="keywordflow">return</span> <a class="code" href="class_s_parts.html#a4b84a104a54f33e8083bebb6c61b3163">m_parentJoint</a>; }
<a name="l00063"></a>00063 <span class="comment"></span>
<a name="l00064"></a>00064 <span class="comment">    /**</span>
<a name="l00065"></a>00065 <span class="comment">     * @brief 子ジョイント・子パーツを設定する</span>
<a name="l00066"></a>00066 <span class="comment">     *</span>
<a name="l00067"></a>00067 <span class="comment">     * currj -&gt; &lt;this&gt; -&gt; nextj -&gt; nextp</span>
<a name="l00068"></a>00068 <span class="comment">     *</span>
<a name="l00069"></a>00069 <span class="comment">     * のように接続する</span>
<a name="l00070"></a>00070 <span class="comment">     * @param currj</span>
<a name="l00071"></a>00071 <span class="comment">     * @param nextj</span>
<a name="l00072"></a>00072 <span class="comment">     * @param nextp</span>
<a name="l00073"></a>00073 <span class="comment">     */</span>
<a name="l00074"></a><a class="code" href="class_s_parts.html#afa738e7b71121cae3467c261a49337e2">00074</a>     <span class="keywordtype">void</span>    <a class="code" href="class_s_parts.html#afa738e7b71121cae3467c261a49337e2" title="子ジョイント・子パーツを設定する">pushChild</a>(<a class="code" href="class_joint.html" title="部品同士を繋ぐ関節クラス">Joint</a> *currj, <a class="code" href="class_joint.html" title="部品同士を繋ぐ関節クラス">Joint</a> *nextj, <a class="code" href="class_s_parts.html" title="エンティティの部品クラス(サーバサイドで使用)">SParts</a> *nextp)
<a name="l00075"></a>00075     {
<a name="l00076"></a>00076         <a class="code" href="class_s_parts.html#a40e9fd7d3eac554b651a9814bb757496">m_children</a>.push_back(<span class="keyword">new</span> <a class="code" href="struct_s_parts_1_1_child.html">Child</a>(currj, nextj, nextp));
<a name="l00077"></a>00077     }
<a name="l00078"></a>00078 <span class="comment"></span>
<a name="l00079"></a>00079 <span class="comment">    /**</span>
<a name="l00080"></a>00080 <span class="comment">     * @brief 子ジョイント・子パーツを設定する</span>
<a name="l00081"></a>00081 <span class="comment">     *</span>
<a name="l00082"></a>00082 <span class="comment">     * このパーツはダミーパーツとし、手前のパーツと次のパーツを接続する</span>
<a name="l00083"></a>00083 <span class="comment">     *</span>
<a name="l00084"></a>00084 <span class="comment">     * のように接続する</span>
<a name="l00085"></a>00085 <span class="comment">     * @param currj</span>
<a name="l00086"></a>00086 <span class="comment">     * @param nextj</span>
<a name="l00087"></a>00087 <span class="comment">     * @param nextp</span>
<a name="l00088"></a>00088 <span class="comment">     */</span>
<a name="l00089"></a><a class="code" href="class_s_parts.html#a41bfaaad8a95fcae5628ead9f8299c8b">00089</a>     <span class="keywordtype">void</span>    <a class="code" href="class_s_parts.html#afa738e7b71121cae3467c261a49337e2" title="子ジョイント・子パーツを設定する">pushChild</a>(<a class="code" href="class_joint.html" title="部品同士を繋ぐ関節クラス">Joint</a> *nextj, <a class="code" href="class_s_parts.html" title="エンティティの部品クラス(サーバサイドで使用)">SParts</a> *nextp)
<a name="l00090"></a>00090     {
<a name="l00091"></a>00091         <a class="code" href="class_s_parts.html#a40e9fd7d3eac554b651a9814bb757496">m_children</a>.push_back(<span class="keyword">new</span> <a class="code" href="struct_s_parts_1_1_child.html">Child</a>(<a class="code" href="class_s_parts.html#a4b84a104a54f33e8083bebb6c61b3163">m_parentJoint</a>, nextj, nextp));
<a name="l00092"></a>00092     }
<a name="l00093"></a>00093 <span class="comment"></span>
<a name="l00094"></a>00094 <span class="comment">    //! 子ジョイントを削除する</span>
<a name="l00095"></a>00095 <span class="comment"></span>    <span class="keywordtype">bool</span>    <a class="code" href="class_s_parts.html#a8002331a8270860070cb89e13e2a23f7" title="子ジョイントを削除する">removeChild</a>(<a class="code" href="class_joint.html" title="部品同士を繋ぐ関節クラス">Joint</a> *nextj);
<a name="l00096"></a>00096 <span class="comment"></span>
<a name="l00097"></a>00097 <span class="comment">    //! このパーツが構成するエンティティを設定する</span>
<a name="l00098"></a><a class="code" href="class_s_parts.html#afad329031bc5608a6f6d62c95bc7056c">00098</a> <span class="comment"></span>    <span class="keywordtype">void</span>    <a class="code" href="class_s_parts.html#afad329031bc5608a6f6d62c95bc7056c" title="このパーツが構成するエンティティを設定する">setParent</a>(<a class="code" href="class_sim_obj_base.html" title="シミュレーションエンティティ基本クラス">SimObjBase</a> *p) { <a class="code" href="class_s_parts.html#adf018457dc724ddf503f4bcd08c1a411">m_parent</a> = p; }
<a name="l00099"></a>00099 
<a name="l00100"></a><a class="code" href="class_s_parts.html#ad0a2e589d1397c1380f4f3687663bdba">00100</a>     <a class="code" href="class_sim_obj_base.html" title="シミュレーションエンティティ基本クラス">SimObjBase</a> *    <a class="code" href="class_s_parts.html#ad0a2e589d1397c1380f4f3687663bdba">getParent</a>() { <span class="keywordflow">return</span> <a class="code" href="class_s_parts.html#adf018457dc724ddf503f4bcd08c1a411">m_parent</a>; }
<a name="l00101"></a>00101 <span class="comment"></span>
<a name="l00102"></a>00102 <span class="comment">    //! 子ジョイントを取得 added by okamoto@tome (2011/2/18)</span>
<a name="l00103"></a><a class="code" href="class_s_parts.html#a7704baa9b1fc7819f5a97fadf315a417">00103</a> <span class="comment"></span>    <a class="code" href="class_s_parts.html#a0b2fdbec815c0439c70e69e6c5780a69">ChildC</a>      <a class="code" href="class_s_parts.html#a7704baa9b1fc7819f5a97fadf315a417" title="子ジョイントを取得 added by okamoto (2011/2/18)">getChild</a>() {
<a name="l00104"></a>00104       <span class="keywordflow">return</span> <a class="code" href="class_s_parts.html#a40e9fd7d3eac554b651a9814bb757496">m_children</a>;
<a name="l00105"></a>00105     }
<a name="l00106"></a>00106 <span class="comment"></span>
<a name="l00107"></a>00107 <span class="comment">    //! ODE形状の位置設定 added by okamoto@tome (2011/10/4)</span>
<a name="l00108"></a><a class="code" href="class_s_parts.html#acb193fefc92cc8f898850b829130dbbb">00108</a> <span class="comment"></span>    <span class="keywordtype">void</span> <a class="code" href="class_s_parts.html#acb193fefc92cc8f898850b829130dbbb" title="ODE形状の位置設定 added by okamoto (2011/10/4).">setODEPos</a>(<span class="keywordtype">double</span> x, <span class="keywordtype">double</span> y, <span class="keywordtype">double</span> z){
<a name="l00109"></a>00109       <a class="code" href="class_s_parts.html#aebabba287b9e65fc22c7fac8585ac421">m_posx</a> = x;
<a name="l00110"></a>00110       <a class="code" href="class_s_parts.html#a165bf34423e7c87262a948a8ba0fe4eb">m_posy</a> = y;
<a name="l00111"></a>00111       <a class="code" href="class_s_parts.html#a43b0004b0a0c4c55f8a96d68fa35b4d3">m_posz</a> = z;
<a name="l00112"></a>00112 
<a name="l00113"></a>00113     }
<a name="l00114"></a>00114 
<a name="l00115"></a>00115     <span class="comment">//* 部品同士が同じエンティティを構成しているか？</span>
<a name="l00116"></a>00116     <span class="keywordtype">bool</span>    <a class="code" href="class_s_parts.html#aec23c140f369dd8fa8dc12388d4acddf">sameParent</a>(<span class="keyword">const</span> <a class="code" href="class_s_parts.html" title="エンティティの部品クラス(サーバサイドで使用)">SParts</a> &amp;o);
<a name="l00117"></a>00117 <span class="comment"></span>
<a name="l00118"></a>00118 <span class="comment">    //! 重量を得る</span>
<a name="l00119"></a>00119 <span class="comment"></span>    <span class="keywordtype">double</span>  <a class="code" href="class_s_parts.html#a0fe9cc617214e158a4937d19b6c717a9" title="重量を得る">getMass</a>();
<a name="l00120"></a>00120 <span class="comment"></span>
<a name="l00121"></a>00121 <span class="comment">    //! 重量を設定する added by okamoto @tome (2011/10/5)</span>
<a name="l00122"></a>00122 <span class="comment"></span>    <span class="keywordtype">void</span> <a class="code" href="class_s_parts.html#abea652378e30b4dc0972706a22539866" title="重量を設定する added by okamoto  (2011/10/5)">setMass</a>(<span class="keywordtype">double</span> mass);
<a name="l00123"></a>00123 
<a name="l00124"></a>00124 
<a name="l00125"></a>00125 <span class="keyword">private</span>:
<a name="l00126"></a>00126 
<a name="l00127"></a>00127     <span class="comment">// currj: 手前のジョイント</span>
<a name="l00128"></a>00128     <span class="comment">// anchorV: 手前のジョイントのアンカーの絶対位置</span>
<a name="l00129"></a>00129     <span class="comment">// R: 全体の回転</span>
<a name="l00130"></a>00130     <span class="keywordtype">void</span>    calcPosition(<a class="code" href="class_joint.html" title="部品同士を繋ぐ関節クラス">Joint</a> *currj, <a class="code" href="class_joint.html" title="部品同士を繋ぐ関節クラス">Joint</a> *nextj, <span class="keyword">const</span> <a class="code" href="class_vector3d.html" title="3次元ベクトルクラス">Vector3d</a> &amp;anchorV, <span class="keyword">const</span> <a class="code" href="class_rotation.html" title="回転行列クラス">Rotation</a> &amp;R);
<a name="l00131"></a>00131 
<a name="l00132"></a>00132     <span class="comment">//dReal maxAngularVel;</span>
<a name="l00133"></a>00133 <span class="keyword">public</span>:<span class="comment"></span>
<a name="l00134"></a>00134 <span class="comment">    /**</span>
<a name="l00135"></a>00135 <span class="comment">     * @brief パーツとジョイントの結合を行う</span>
<a name="l00136"></a>00136 <span class="comment">     *</span>
<a name="l00137"></a>00137 <span class="comment">     * @param v  エージェントの中心の位置(世界座標系)</span>
<a name="l00138"></a>00138 <span class="comment">     * @param r  エージェントの向き(世界座標系)</span>
<a name="l00139"></a>00139 <span class="comment">     * @dynamics 物理計算を有効にするか？</span>
<a name="l00140"></a>00140 <span class="comment">     */</span>
<a name="l00141"></a>00141     <span class="keywordtype">void</span>    <a class="code" href="class_s_parts.html#ab147c6daaf762016b93293c1b313ed4a" title="パーツとジョイントの結合を行う">build</a>(<span class="keyword">const</span> <a class="code" href="class_vector3d.html" title="3次元ベクトルクラス">Vector3d</a> &amp;v, <span class="keyword">const</span> <a class="code" href="class_rotation.html" title="回転行列クラス">Rotation</a> &amp;r, <span class="keywordtype">bool</span> dynamics);<span class="comment"></span>
<a name="l00142"></a>00142 <span class="comment">    /**</span>
<a name="l00143"></a>00143 <span class="comment">     * @brief 各部品の位置・方向を計算する</span>
<a name="l00144"></a>00144 <span class="comment">     *</span>
<a name="l00145"></a>00145 <span class="comment">     * 物理計算が無効のときのみ呼び出し可能</span>
<a name="l00146"></a>00146 <span class="comment">     */</span>
<a name="l00147"></a>00147     <span class="keywordtype">void</span>    <a class="code" href="class_s_parts.html#a4584bb51608802ba60b8b769c8f3cef8" title="各部品の位置・方向を計算する">calcPosture</a>();
<a name="l00148"></a>00148 <span class="comment"></span>
<a name="l00149"></a>00149 <span class="comment">    //! ODE Bodyのラッパークラスを取得する</span>
<a name="l00150"></a><a class="code" href="class_s_parts.html#a2fe6702da92d547ff5fbe48f88567711">00150</a> <span class="comment"></span>    <a class="code" href="class_o_d_e_obj.html" title="ODEにおけるシミュレーションオブジェクトラッパークラス.">ODEObj</a> &amp;<a class="code" href="class_s_parts.html#a2fe6702da92d547ff5fbe48f88567711" title="ODE Bodyのラッパークラスを取得する.">odeobj</a>() { <span class="keywordflow">return</span> *<a class="code" href="class_s_parts.html#a97a39edb673802271c60812935dbf2e7">m_odeobj</a>; }
<a name="l00151"></a>00151 <span class="comment"></span>
<a name="l00152"></a>00152 <span class="comment">    //! 物理計算の有効/無効を切り替える</span>
<a name="l00153"></a>00153 <span class="comment"></span>    <span class="keywordtype">void</span>    <a class="code" href="class_s_parts.html#a4c394771a6cf20364e0dea75a8d9ad30" title="物理計算の有効/無効を切り替える">enableDynamics</a>(<span class="keywordtype">bool</span> b);
<a name="l00154"></a>00154 
<a name="l00155"></a>00155     <span class="comment">// --------------------------------------------------------</span>
<a name="l00156"></a>00156     <span class="comment">//  Parts基底クラスのメンバ(m_pos, m_rot)へのアクセス関数</span>
<a name="l00157"></a>00157     <span class="comment">//</span>
<a name="l00158"></a>00158     <span class="comment">//  これらでセットした位置、回転情報は、build()により</span>
<a name="l00159"></a>00159     <span class="comment">//  ODE bodyに反映される．</span>
<a name="l00160"></a>00160     <span class="comment">//  （逆に言うと、build()をコールしない限り、パーツの</span>
<a name="l00161"></a>00161     <span class="comment">//    位置、回転はODE bodyには反映されない）</span>
<a name="l00162"></a>00162     <span class="comment">// --------------------------------------------------------</span><span class="comment"></span>
<a name="l00163"></a>00163 <span class="comment">    //! パーツの位置(エージェント座標系)を設定する</span>
<a name="l00164"></a><a class="code" href="class_s_parts.html#a400adb542b79a8da208e8b1b3f529397">00164</a> <span class="comment"></span>    <span class="keywordtype">void</span>    <a class="code" href="class_s_parts.html#a400adb542b79a8da208e8b1b3f529397" title="パーツの位置(エージェント座標系)を設定する">setInitialPosition</a>(<span class="keywordtype">double</span> x, <span class="keywordtype">double</span> y, <span class="keywordtype">double</span> z)
<a name="l00165"></a>00165     {
<a name="l00166"></a>00166         <a class="code" href="class_parts.html#a5834623014043d7e7bbfef29998ad7d5">m_pos</a>.<a class="code" href="class_position.html#a6bf294381a4d9805a1cea299ec2ffc86" title="各座標値を設定する">set</a>(x, y, z);
<a name="l00167"></a>00167     }
<a name="l00168"></a>00168 <span class="comment"></span>
<a name="l00169"></a>00169 <span class="comment">    //! パーツの位置(エージェント座標系)を設定する</span>
<a name="l00170"></a><a class="code" href="class_s_parts.html#ac7528e3323fa0903b06ac0cef1ca845f">00170</a> <span class="comment"></span>    <span class="keywordtype">void</span>    <a class="code" href="class_s_parts.html#a400adb542b79a8da208e8b1b3f529397" title="パーツの位置(エージェント座標系)を設定する">setInitialPosition</a>(<span class="keyword">const</span> <a class="code" href="class_vector3d.html" title="3次元ベクトルクラス">Vector3d</a> &amp;v)
<a name="l00171"></a>00171     {
<a name="l00172"></a>00172         <a class="code" href="class_parts.html#a5834623014043d7e7bbfef29998ad7d5">m_pos</a>.<a class="code" href="class_position.html#a6bf294381a4d9805a1cea299ec2ffc86" title="各座標値を設定する">set</a>(v.<a class="code" href="class_vector3d.html#a4e77e669055f31f2b244b1ee37ffa36f" title="X軸要素を設定する.">x</a>(), v.<a class="code" href="class_vector3d.html#aa543c5f9ab89744357a80dd1ab6031cb" title="Y軸要素を設定する.">y</a>(), v.<a class="code" href="class_vector3d.html#ac95aee85033af052d24e15975faeea7d" title="Z軸要素を設定する.">z</a>());
<a name="l00173"></a>00173     }
<a name="l00174"></a>00174 <span class="comment"></span>
<a name="l00175"></a>00175 <span class="comment">    //! エージェント座標系におけるパーツの向き(クォータニオン)を設定する</span>
<a name="l00176"></a>00176 <span class="comment"></span>    <span class="keywordtype">void</span>    <a class="code" href="class_s_parts.html#a578b701469881e9335df296656a5a42b" title="エージェント座標系におけるパーツの向き(クォータニオン)を設定する...">setInitialQuaternion</a>(dReal q0, dReal q1, dReal q2, dReal q3);
<a name="l00177"></a>00177 <span class="comment"></span>
<a name="l00178"></a>00178 <span class="comment">    //! エージェント座標系におけるパーツの向き(回転行列)を設定する</span>
<a name="l00179"></a><a class="code" href="class_s_parts.html#ac99922e4340b520afa81b259b94c2345">00179</a> <span class="comment"></span>    <span class="keywordtype">void</span>    <a class="code" href="class_s_parts.html#a578b701469881e9335df296656a5a42b" title="エージェント座標系におけるパーツの向き(クォータニオン)を設定する...">setInitialQuaternion</a>(<a class="code" href="class_rotation.html" title="回転行列クラス">Rotation</a> &amp;r)
<a name="l00180"></a>00180     {
<a name="l00181"></a>00181         <span class="keyword">const</span> dReal *q = r.<a class="code" href="class_rotation.html#a16f2a4fefbd48c756a0c9ad7be85ee1f" title="クォータニオンを取得する">q</a>();
<a name="l00182"></a>00182         <a class="code" href="class_s_parts.html#a578b701469881e9335df296656a5a42b" title="エージェント座標系におけるパーツの向き(クォータニオン)を設定する...">setInitialQuaternion</a>(q[0], q[1], q[2], q[3]);
<a name="l00183"></a>00183     }
<a name="l00184"></a>00184 
<a name="l00185"></a>00185     <span class="comment">// -----------------------------------------------------</span>
<a name="l00186"></a>00186     <span class="comment">//  ODE bodyへのアクセス関数</span>
<a name="l00187"></a>00187     <span class="comment">// -----------------------------------------------------</span>
<a name="l00188"></a>00188 <span class="comment"></span>
<a name="l00189"></a>00189 <span class="comment">    //! 世界座標系における位置を設定する(BODYのみ指定可能)</span>
<a name="l00190"></a>00190 <span class="comment"></span>    <span class="keywordtype">void</span>    <a class="code" href="class_s_parts.html#a28ad27e08c494963e88bd6250d157b55" title="世界座標系における位置を設定する(BODYのみ指定可能)">setPosition</a>(<span class="keyword">const</span> <a class="code" href="class_vector3d.html" title="3次元ベクトルクラス">Vector3d</a> &amp;v);
<a name="l00191"></a>00191 <span class="comment"></span>
<a name="l00192"></a>00192 <span class="comment">    //! パーツに作用する外力を設定する</span>
<a name="l00193"></a>00193 <span class="comment"></span>    <span class="keywordtype">void</span>    <a class="code" href="class_s_parts.html#a917ed53db04e47fbcbddc498eb6af504" title="パーツに作用する外力を設定する">setForce</a>(dReal fx, dReal fy, dReal fz);
<a name="l00194"></a>00194 <span class="comment"></span>
<a name="l00195"></a>00195 <span class="comment">    //! パーツに作用するトルクを設定する</span>
<a name="l00196"></a>00196 <span class="comment"></span>    <span class="keywordtype">void</span>    <a class="code" href="class_s_parts.html#a6acf01511c3cac719074f28b82e98677" title="パーツに作用するトルクを設定する">setTorque</a>(dReal tx, dReal ty, dReal tz);
<a name="l00197"></a>00197 <span class="comment"></span>
<a name="l00198"></a>00198 <span class="comment">    /**</span>
<a name="l00199"></a>00199 <span class="comment">     * パーツに作用する速度を設定する</span>
<a name="l00200"></a>00200 <span class="comment">     * @param vx 速度のX成分</span>
<a name="l00201"></a>00201 <span class="comment">     * @param vy 速度のY成分</span>
<a name="l00202"></a>00202 <span class="comment">     * @param vz 速度のZ成分</span>
<a name="l00203"></a>00203 <span class="comment">     */</span>
<a name="l00204"></a>00204     <span class="keywordtype">void</span> <a class="code" href="class_s_parts.html#a699ac029382a1d699ca95af7a4368b8e">setVelocity</a>(dReal vx,dReal vy,dReal vz);
<a name="l00205"></a>00205 <span class="comment"></span>
<a name="l00206"></a>00206 <span class="comment">    /**</span>
<a name="l00207"></a>00207 <span class="comment">     * 最大角速度を設定する</span>
<a name="l00208"></a>00208 <span class="comment">     */</span>
<a name="l00209"></a>00209     <span class="comment">//void setAngularMaxVelocity(dReal max);</span>
<a name="l00210"></a>00210 <span class="comment"></span>
<a name="l00211"></a>00211 <span class="comment">    /**</span>
<a name="l00212"></a>00212 <span class="comment">     * パーツに作用する角速度を設定する</span>
<a name="l00213"></a>00213 <span class="comment">     * @param x 角速度のX軸成分</span>
<a name="l00214"></a>00214 <span class="comment">     */</span>
<a name="l00215"></a>00215     <span class="keywordtype">void</span> <a class="code" href="class_s_parts.html#ae8511a1fd690cb16b2899bea249f9590">setAngularVelocity</a>(dReal x,dReal y,dReal z);
<a name="l00216"></a>00216 <span class="comment"></span>
<a name="l00217"></a>00217 <span class="comment">    //! 世界座標系における向き(回転行列)を設定する</span>
<a name="l00218"></a><a class="code" href="class_s_parts.html#afdb5b4fd26a088889330cb9bf292a736">00218</a> <span class="comment"></span>    <span class="keywordtype">void</span>    <a class="code" href="class_s_parts.html#afdb5b4fd26a088889330cb9bf292a736" title="世界座標系における向き(回転行列)を設定する">setRotation</a>(<span class="keyword">const</span> <a class="code" href="class_rotation.html" title="回転行列クラス">Rotation</a> &amp;r)
<a name="l00219"></a>00219     {
<a name="l00220"></a>00220         <span class="keyword">const</span> dReal *q = r.<a class="code" href="class_rotation.html#a16f2a4fefbd48c756a0c9ad7be85ee1f" title="クォータニオンを取得する">q</a>();
<a name="l00221"></a>00221         <a class="code" href="class_s_parts.html#a8710b7066f07d9cfe9020b5fba9d40bc" title="世界座標系における向き(クォータニオン)を設定する">SParts::setQuaternion</a>(q[0], q[1], q[2], q[3]);
<a name="l00222"></a>00222     }
<a name="l00223"></a>00223 <span class="comment"></span>
<a name="l00224"></a>00224 <span class="comment">    //! 世界座標系における向き(クォータニオン)を設定する</span>
<a name="l00225"></a><a class="code" href="class_s_parts.html#a8710b7066f07d9cfe9020b5fba9d40bc">00225</a> <span class="comment"></span>    <span class="keywordtype">void</span>    <a class="code" href="class_s_parts.html#a8710b7066f07d9cfe9020b5fba9d40bc" title="世界座標系における向き(クォータニオン)を設定する">setQuaternion</a>(<span class="keyword">const</span> dReal *q)
<a name="l00226"></a>00226     {
<a name="l00227"></a>00227         <a class="code" href="class_s_parts.html#a8710b7066f07d9cfe9020b5fba9d40bc" title="世界座標系における向き(クォータニオン)を設定する">SParts::setQuaternion</a>(q[0], q[1], q[2], q[3]);
<a name="l00228"></a>00228     }<span class="comment"></span>
<a name="l00229"></a>00229 <span class="comment">    //! 世界座標系における向き(クォータニオン)を設定する</span>
<a name="l00230"></a>00230 <span class="comment"></span>    <span class="keywordtype">void</span>    <a class="code" href="class_s_parts.html#a8710b7066f07d9cfe9020b5fba9d40bc" title="世界座標系における向き(クォータニオン)を設定する">setQuaternion</a>(dReal, dReal, dReal, dReal);
<a name="l00231"></a>00231 <span class="comment"></span>
<a name="l00232"></a>00232 <span class="comment">    //! 現在の位置を得る</span>
<a name="l00233"></a>00233 <span class="comment"></span>    <span class="keyword">const</span> dReal * <a class="code" href="class_s_parts.html#ac9425bd059c4565c1a21826f1b1c063c" title="現在の位置を得る">getPosition</a>();
<a name="l00234"></a>00234 <span class="comment"></span>
<a name="l00235"></a>00235 <span class="comment">    //! 現在の回転(回転行列)を得る</span>
<a name="l00236"></a>00236 <span class="comment"></span>    <span class="keyword">const</span> dReal * <a class="code" href="class_s_parts.html#a67c2ca68807e57c96f77f3b9aa23d8e8" title="現在の回転(回転行列)を得る">getRotation</a>();
<a name="l00237"></a>00237 <span class="comment"></span>
<a name="l00238"></a>00238 <span class="comment">    //! 現在の回転(クォータニオン)を得る</span>
<a name="l00239"></a>00239 <span class="comment"></span>    <span class="keyword">const</span> dReal * <a class="code" href="class_s_parts.html#a50261427cdd123283df564fe9623c4fb" title="現在の回転(クォータニオン)を得る">getQuaternion</a>();
<a name="l00240"></a>00240 <span class="comment"></span>
<a name="l00241"></a>00241 <span class="comment">    //! パーツに作用している力を得る</span>
<a name="l00242"></a>00242 <span class="comment"></span>    <span class="keyword">const</span> dReal * <a class="code" href="class_s_parts.html#ac5ddd193573c59946910ce0ca04f3825" title="パーツに作用している力を得る">getForce</a>();
<a name="l00243"></a>00243 <span class="comment"></span>
<a name="l00244"></a>00244 <span class="comment">    //! パーツに作用しているトルクを得る</span>
<a name="l00245"></a>00245 <span class="comment"></span>    <span class="keyword">const</span> dReal * <a class="code" href="class_s_parts.html#a91d91e378e85abae745f7aefb012d326" title="パーツに作用しているトルクを得る">getTorque</a>();
<a name="l00246"></a>00246 
<a name="l00247"></a>00247 <span class="keyword">public</span>:<span class="comment"></span>
<a name="l00248"></a>00248 <span class="comment">    //! ODEの world space オブジェクトを設定する</span>
<a name="l00249"></a>00249 <span class="comment"></span>    <span class="keyword">virtual</span> <span class="keywordtype">void</span> <span class="keyword">set</span>(dWorldID w, dSpaceID s) = 0;
<a name="l00250"></a>00250 <span class="comment"></span>
<a name="l00251"></a>00251 <span class="comment">    //! SPartsの内容ダンプ</span>
<a name="l00252"></a>00252 <span class="comment"></span>    <span class="keywordtype">void</span> <a class="code" href="class_s_parts.html#a0f8aaac302f1e867c73a8e4dd93b01f2" title="SPartsの内容ダンプ.">dump</a>();    <span class="comment">// FIX20110421(ExpSS)</span>
<a name="l00253"></a>00253     <span class="keywordtype">void</span> <a class="code" href="class_s_parts.html#a9abd68e6162a3059cc93dd86fefd23f6">dumpConnectionInfo</a>(<span class="keywordtype">int</span> level); <span class="comment">// FIX20110421(ExpSS)</span>
<a name="l00254"></a>00254     <span class="keywordtype">void</span> <a class="code" href="class_s_parts.html#ac1cf16222278ef0fb0291e48b082b422">dumpODEInfo</a>(<span class="keywordtype">int</span> level);    <span class="comment">// FIX20110421(ExpSS)</span>
<a name="l00255"></a>00255     <span class="keywordtype">void</span> <a class="code" href="class_s_parts.html#aede32793a4ac099418d25223bb2e7f41">printIndent</a>(<span class="keywordtype">int</span> level);
<a name="l00256"></a>00256 };
<a name="l00257"></a>00257 <span class="comment"></span>
<a name="l00258"></a>00258 <span class="comment">/**</span>
<a name="l00259"></a>00259 <span class="comment"> * @brief 箱形状の部品クラス(サーバサイドで使用)</span>
<a name="l00260"></a>00260 <span class="comment"> */</span>
<a name="l00261"></a><a class="code" href="class_s_box_parts.html">00261</a> <span class="keyword">class </span><a class="code" href="class_s_box_parts.html" title="箱形状の部品クラス(サーバサイドで使用)">SBoxParts</a> : <span class="keyword">public</span> <a class="code" href="class_s_parts.html" title="エンティティの部品クラス(サーバサイドで使用)">SParts</a>
<a name="l00262"></a>00262 {
<a name="l00263"></a>00263 <span class="keyword">private</span>:
<a name="l00264"></a>00264     <a class="code" href="class_box_parts_cmpnt.html" title="箱形状パーツデータクラス">BoxPartsCmpnt</a> m_cmpnt;
<a name="l00265"></a>00265 <span class="keyword">public</span>:<span class="comment"></span>
<a name="l00266"></a>00266 <span class="comment">    /**</span>
<a name="l00267"></a>00267 <span class="comment">     * @brief コンストラクタ</span>
<a name="l00268"></a>00268 <span class="comment">     *</span>
<a name="l00269"></a>00269 <span class="comment">     * @param name 部品名</span>
<a name="l00270"></a>00270 <span class="comment">     * @param pos 部品の中心位置</span>
<a name="l00271"></a>00271 <span class="comment">     * @param sz  箱のサイズ(縦×横×高さ)</span>
<a name="l00272"></a>00272 <span class="comment">     */</span>
<a name="l00273"></a><a class="code" href="class_s_box_parts.html#a15d3c6f56046709a4021041b34de1713">00273</a>     <a class="code" href="class_s_box_parts.html#a15d3c6f56046709a4021041b34de1713" title="コンストラクタ">SBoxParts</a>(<span class="keyword">const</span> <span class="keywordtype">char</span> *<a class="code" href="class_parts.html#af245eb5dd2bfcf0783634ec495bb4fa5" title="パーツ名の取得">name</a>, <span class="keyword">const</span> <a class="code" href="class_position.html" title="3次元位置クラス">Position</a> &amp;pos, <span class="keyword">const</span> <a class="code" href="class_size.html" title="シミュレーション世界内における3次元直方体の大きさを表すクラス...">Size</a> &amp;sz)
<a name="l00274"></a>00274         : <a class="code" href="class_s_parts.html" title="エンティティの部品クラス(サーバサイドで使用)">SParts</a>(<a class="code" href="_parts_8h.html#ab04a0655cd1e3bcac5e8f48c18df1a57a7ff0ca60270734cf52e02cc35bb99e03">PARTS_TYPE_BOX</a>, name, pos), m_cmpnt(sz) {}
<a name="l00275"></a>00275 
<a name="l00276"></a>00276 <span class="keyword">public</span>:<span class="comment"></span>
<a name="l00277"></a>00277 <span class="comment">    //! サイズを得る</span>
<a name="l00278"></a><a class="code" href="class_s_box_parts.html#a110a8ad441bfabf091ac24be7d382bbb">00278</a> <span class="comment"></span>    <a class="code" href="class_size.html" title="シミュレーション世界内における3次元直方体の大きさを表すクラス...">Size</a> &amp; <a class="code" href="class_s_box_parts.html#a110a8ad441bfabf091ac24be7d382bbb" title="サイズを得る">getSize</a>() { <span class="keywordflow">return</span> m_cmpnt.<a class="code" href="class_box_parts_cmpnt.html#a776c09c7d38f7469abe926e49b244586" title="箱のサイズを得る">size</a>(); }
<a name="l00279"></a>00279 
<a name="l00280"></a>00280 <span class="preprocessor">#if 1</span>
<a name="l00281"></a>00281 <span class="preprocessor"></span><span class="comment">// FIX20110421(ExpSS)</span><span class="comment"></span>
<a name="l00282"></a>00282 <span class="comment">    //! サイズを設定する</span>
<a name="l00283"></a><a class="code" href="class_s_box_parts.html#a419f5086cba69c496280d225175f1ac9">00283</a> <span class="comment"></span>    <span class="keywordtype">void</span> <a class="code" href="class_s_box_parts.html#a419f5086cba69c496280d225175f1ac9" title="サイズを設定する">setSize</a>(dReal sx, dReal sy, dReal sz)
<a name="l00284"></a>00284     {
<a name="l00285"></a>00285         m_cmpnt.<a class="code" href="class_box_parts_cmpnt.html#a776c09c7d38f7469abe926e49b244586" title="箱のサイズを得る">size</a>(sx, sy, sz);
<a name="l00286"></a>00286     }
<a name="l00287"></a>00287 <span class="preprocessor">#endif</span>
<a name="l00288"></a>00288 <span class="preprocessor"></span>
<a name="l00289"></a>00289 <span class="keyword">private</span>:
<a name="l00290"></a>00290     <span class="comment">// SParts implementation</span>
<a name="l00291"></a>00291     <span class="keywordtype">void</span> <span class="keyword">set</span>(dWorldID w, dSpaceID s);
<a name="l00292"></a>00292 
<a name="l00293"></a>00293     <span class="comment">// Parts implementation</span>
<a name="l00294"></a>00294     <a class="code" href="class_parts_cmpnt.html" title="パーツを構成する要素インターフェース">PartsCmpnt</a> * extdata() { <span class="keywordflow">return</span> &amp;m_cmpnt; }
<a name="l00295"></a>00295 };
<a name="l00296"></a>00296 <span class="comment"></span>
<a name="l00297"></a>00297 <span class="comment">/**</span>
<a name="l00298"></a>00298 <span class="comment"> * @brief シリンダ形状の部品クラス(サーバサイドで使用)</span>
<a name="l00299"></a>00299 <span class="comment"> */</span>
<a name="l00300"></a><a class="code" href="class_s_cylinder_parts.html">00300</a> <span class="keyword">class </span><a class="code" href="class_s_cylinder_parts.html" title="シリンダ形状の部品クラス(サーバサイドで使用)">SCylinderParts</a> : <span class="keyword">public</span> <a class="code" href="class_s_parts.html" title="エンティティの部品クラス(サーバサイドで使用)">SParts</a>
<a name="l00301"></a>00301 {
<a name="l00302"></a>00302 <span class="keyword">private</span>:
<a name="l00303"></a>00303     <a class="code" href="class_cylinder_parts_cmpnt.html" title="シリンダー形状パーツデータクラス">CylinderPartsCmpnt</a> m_cmpnt;
<a name="l00304"></a>00304 <span class="keyword">public</span>:<span class="comment"></span>
<a name="l00305"></a>00305 <span class="comment">    /**</span>
<a name="l00306"></a>00306 <span class="comment">     * @brief コンストラクタ</span>
<a name="l00307"></a>00307 <span class="comment">     *</span>
<a name="l00308"></a>00308 <span class="comment">     * @param name 部品名</span>
<a name="l00309"></a>00309 <span class="comment">     * @param pos 部品の中心位置</span>
<a name="l00310"></a>00310 <span class="comment">     * @param rad  シリンダの円の半径</span>
<a name="l00311"></a>00311 <span class="comment">     * @param len シリンダの長さ</span>
<a name="l00312"></a>00312 <span class="comment">     */</span>
<a name="l00313"></a><a class="code" href="class_s_cylinder_parts.html#aee21b7563bd2fcb6994beb697aa29dcb">00313</a>     <a class="code" href="class_s_cylinder_parts.html#aee21b7563bd2fcb6994beb697aa29dcb" title="コンストラクタ">SCylinderParts</a>(<span class="keyword">const</span> <span class="keywordtype">char</span> *<a class="code" href="class_parts.html#af245eb5dd2bfcf0783634ec495bb4fa5" title="パーツ名の取得">name</a>,
<a name="l00314"></a>00314                <span class="keyword">const</span> <a class="code" href="class_position.html" title="3次元位置クラス">Position</a> &amp;pos, dReal rad, dReal len)
<a name="l00315"></a>00315         : <a class="code" href="class_s_parts.html" title="エンティティの部品クラス(サーバサイドで使用)">SParts</a>(<a class="code" href="_parts_8h.html#ab04a0655cd1e3bcac5e8f48c18df1a57a61ca09abddf9cdae9a6972c81b9c0daa">PARTS_TYPE_CYLINDER</a>, name, pos), m_cmpnt(rad, len) {}
<a name="l00316"></a>00316 <span class="comment"></span>
<a name="l00317"></a>00317 <span class="comment">    /**</span>
<a name="l00318"></a>00318 <span class="comment">     * 角度の初期化</span>
<a name="l00319"></a>00319 <span class="comment">     * @param x 軸のX軸方向</span>
<a name="l00320"></a>00320 <span class="comment">     * @param y 軸のY軸方向</span>
<a name="l00321"></a>00321 <span class="comment">     * @param z 軸のZ軸方向</span>
<a name="l00322"></a>00322 <span class="comment">     */</span>
<a name="l00323"></a>00323     <span class="comment">//  added by kawamoto@tome (2011/04/04)</span>
<a name="l00324"></a>00324     <span class="keywordtype">void</span> <a class="code" href="class_s_cylinder_parts.html#acd3b158d416630746e49ef1d43a30525">initializeAngle</a>(<span class="keywordtype">double</span> x,<span class="keywordtype">double</span> y,<span class="keywordtype">double</span> z);
<a name="l00325"></a>00325 <span class="comment"></span>
<a name="l00326"></a>00326 <span class="comment">    //! シリンダの円の半径を取得する</span>
<a name="l00327"></a><a class="code" href="class_s_cylinder_parts.html#aaa9cdaf50419b7562a85911756b35982">00327</a> <span class="comment"></span>    dReal <a class="code" href="class_s_cylinder_parts.html#aaa9cdaf50419b7562a85911756b35982" title="シリンダの円の半径を取得する">getRadius</a>() { <span class="keywordflow">return</span> m_cmpnt.<a class="code" href="class_cylinder_parts_cmpnt.html#a81d1a5665475b82e80dde077debbfbb5" title="シリンダーの円の半径を取得する">radius</a>(); }
<a name="l00328"></a>00328 <span class="comment"></span>
<a name="l00329"></a>00329 <span class="comment">    //! シリンダの長さを取得する</span>
<a name="l00330"></a><a class="code" href="class_s_cylinder_parts.html#abda864da66bb74b93c7d773bd574d83f">00330</a> <span class="comment"></span>    dReal <a class="code" href="class_s_cylinder_parts.html#abda864da66bb74b93c7d773bd574d83f" title="シリンダの長さを取得する">getLength</a>() { <span class="keywordflow">return</span> m_cmpnt.<a class="code" href="class_cylinder_parts_cmpnt.html#ae7e74a3bba3156787dd270306ee8e63a" title="シリンダーの長さを取得する">length</a>(); }
<a name="l00331"></a>00331 
<a name="l00332"></a>00332 <span class="preprocessor">#if 1</span>
<a name="l00333"></a>00333 <span class="preprocessor"></span><span class="comment">// FIX20110421(ExpSS)</span><span class="comment"></span>
<a name="l00334"></a>00334 <span class="comment">    //! シリンダの円の半径を設定する</span>
<a name="l00335"></a><a class="code" href="class_s_cylinder_parts.html#ad7a3d242d849aa8954a6ef89ea0531b4">00335</a> <span class="comment"></span>    <span class="keywordtype">void</span> <a class="code" href="class_s_cylinder_parts.html#ad7a3d242d849aa8954a6ef89ea0531b4" title="シリンダの円の半径を設定する">setRadius</a>(dReal r) { m_cmpnt.<a class="code" href="class_cylinder_parts_cmpnt.html#a81d1a5665475b82e80dde077debbfbb5" title="シリンダーの円の半径を取得する">radius</a>(r); }
<a name="l00336"></a>00336 <span class="comment"></span>
<a name="l00337"></a>00337 <span class="comment">    //! シリンダの長さを設定する</span>
<a name="l00338"></a><a class="code" href="class_s_cylinder_parts.html#aae10980851bfbb8c481200292c4e00d9">00338</a> <span class="comment"></span>    <span class="keywordtype">void</span> <a class="code" href="class_s_cylinder_parts.html#aae10980851bfbb8c481200292c4e00d9" title="シリンダの長さを設定する">setLength</a>(dReal l) { m_cmpnt.<a class="code" href="class_cylinder_parts_cmpnt.html#ae7e74a3bba3156787dd270306ee8e63a" title="シリンダーの長さを取得する">length</a>(l); }
<a name="l00339"></a>00339 <span class="preprocessor">#endif</span>
<a name="l00340"></a>00340 <span class="preprocessor"></span>
<a name="l00341"></a>00341 <span class="keyword">private</span>:
<a name="l00342"></a>00342     <span class="comment">// SParts implementation</span>
<a name="l00343"></a>00343     <span class="keywordtype">void</span> <span class="keyword">set</span>(dWorldID w, dSpaceID s);
<a name="l00344"></a>00344 <span class="comment"></span>
<a name="l00345"></a>00345 <span class="comment">    /**</span>
<a name="l00346"></a>00346 <span class="comment">     * 軸を指定してシリンダを作成します</span>
<a name="l00347"></a>00347 <span class="comment">     * @param w</span>
<a name="l00348"></a>00348 <span class="comment">     */</span>
<a name="l00349"></a>00349     <span class="keywordtype">void</span> setFromAxis(dWorldID w, dSpaceID s,<span class="keywordtype">double</span> x1,<span class="keywordtype">double</span> y1,<span class="keywordtype">double</span> z1,<span class="keywordtype">double</span> x2,<span class="keywordtype">double</span> y2,<span class="keywordtype">double</span> z2);
<a name="l00350"></a>00350 
<a name="l00351"></a>00351     <span class="comment">// Parts implementation</span>
<a name="l00352"></a>00352     <a class="code" href="class_parts_cmpnt.html" title="パーツを構成する要素インターフェース">PartsCmpnt</a> * extdata() { <span class="keywordflow">return</span> &amp;m_cmpnt; }
<a name="l00353"></a>00353     <span class="comment">//  シリンダ生成時の傾き</span>
<a name="l00354"></a>00354     <span class="keywordtype">double</span> x_axis;
<a name="l00355"></a>00355     <span class="keywordtype">double</span> y_axis;
<a name="l00356"></a>00356     <span class="keywordtype">double</span> z_axis;
<a name="l00357"></a>00357     <span class="keywordtype">double</span> angleData;
<a name="l00358"></a>00358 };
<a name="l00359"></a>00359 <span class="comment"></span>
<a name="l00360"></a>00360 <span class="comment">/**</span>
<a name="l00361"></a>00361 <span class="comment"> * @brief 球形状の部品クラス(サーバサイドで使用)</span>
<a name="l00362"></a>00362 <span class="comment"> */</span>
<a name="l00363"></a><a class="code" href="class_s_sphere_parts.html">00363</a> <span class="keyword">class </span><a class="code" href="class_s_sphere_parts.html" title="球形状の部品クラス(サーバサイドで使用)">SSphereParts</a> : <span class="keyword">public</span> <a class="code" href="class_s_parts.html" title="エンティティの部品クラス(サーバサイドで使用)">SParts</a>
<a name="l00364"></a>00364 {
<a name="l00365"></a>00365 <span class="keyword">private</span>:
<a name="l00366"></a>00366     <a class="code" href="class_sphere_parts_cmpnt.html" title="球形状パーツデータクラス">SpherePartsCmpnt</a> m_cmpnt;
<a name="l00367"></a>00367 <span class="keyword">public</span>:<span class="comment"></span>
<a name="l00368"></a>00368 <span class="comment">    /**</span>
<a name="l00369"></a>00369 <span class="comment">     * @brief コンストラクタ</span>
<a name="l00370"></a>00370 <span class="comment">     *</span>
<a name="l00371"></a>00371 <span class="comment">     * @param name 部品名</span>
<a name="l00372"></a>00372 <span class="comment">     * @param pos 部品の中心位置</span>
<a name="l00373"></a>00373 <span class="comment">     * @param radius  球の半径</span>
<a name="l00374"></a>00374 <span class="comment">     */</span>
<a name="l00375"></a><a class="code" href="class_s_sphere_parts.html#a981bf8cbc49f655f9e06fcf6fd52b7fe">00375</a>     <a class="code" href="class_s_sphere_parts.html#a981bf8cbc49f655f9e06fcf6fd52b7fe" title="コンストラクタ">SSphereParts</a>(<span class="keyword">const</span> <span class="keywordtype">char</span> *<a class="code" href="class_parts.html#af245eb5dd2bfcf0783634ec495bb4fa5" title="パーツ名の取得">name</a>, <span class="keyword">const</span> <a class="code" href="class_position.html" title="3次元位置クラス">Position</a> &amp;pos, <span class="keywordtype">double</span> radius)
<a name="l00376"></a>00376         : <a class="code" href="class_s_parts.html" title="エンティティの部品クラス(サーバサイドで使用)">SParts</a>(<a class="code" href="_parts_8h.html#ab04a0655cd1e3bcac5e8f48c18df1a57aaa632ca0e9baef38b6f427e01b583572">PARTS_TYPE_SPHERE</a>, name, pos), m_cmpnt(radius) {}
<a name="l00377"></a>00377 <span class="comment"></span>
<a name="l00378"></a>00378 <span class="comment">    //! 球の半径を取得する</span>
<a name="l00379"></a><a class="code" href="class_s_sphere_parts.html#a191249364c1d788a664ca53f768b8feb">00379</a> <span class="comment"></span>    <span class="keywordtype">double</span> <a class="code" href="class_s_sphere_parts.html#a191249364c1d788a664ca53f768b8feb" title="球の半径を取得する">getRadius</a>() { <span class="keywordflow">return</span> m_cmpnt.<a class="code" href="class_sphere_parts_cmpnt.html#a486dc373d6c3326abcc3b63da2b4d1b6" title="球の半径を取得する">radius</a>(); }
<a name="l00380"></a>00380 
<a name="l00381"></a>00381 <span class="preprocessor">#if 1</span>
<a name="l00382"></a>00382 <span class="preprocessor"></span><span class="comment">// FIX20110421(ExpSS)</span><span class="comment"></span>
<a name="l00383"></a>00383 <span class="comment">    //! 球の半径を設定する</span>
<a name="l00384"></a><a class="code" href="class_s_sphere_parts.html#ac6c8b24b667ae14d024f338a653236e2">00384</a> <span class="comment"></span>    <span class="keywordtype">void</span> <a class="code" href="class_s_sphere_parts.html#ac6c8b24b667ae14d024f338a653236e2" title="球の半径を設定する">setRadius</a>(<span class="keywordtype">double</span> r) { m_cmpnt.<a class="code" href="class_sphere_parts_cmpnt.html#a486dc373d6c3326abcc3b63da2b4d1b6" title="球の半径を取得する">radius</a>(r); }
<a name="l00385"></a>00385 <span class="preprocessor">#endif</span>
<a name="l00386"></a>00386 <span class="preprocessor"></span>
<a name="l00387"></a>00387 <span class="keyword">private</span>:
<a name="l00388"></a>00388     <span class="comment">// SParts implementation</span>
<a name="l00389"></a>00389     <span class="keywordtype">void</span> <span class="keyword">set</span>(dWorldID w, dSpaceID s);
<a name="l00390"></a>00390 
<a name="l00391"></a>00391     <span class="comment">// Parts implementation</span>
<a name="l00392"></a>00392     <a class="code" href="class_parts_cmpnt.html" title="パーツを構成する要素インターフェース">PartsCmpnt</a> * extdata() { <span class="keywordflow">return</span> &amp;m_cmpnt; }
<a name="l00393"></a>00393 };
<a name="l00394"></a>00394 <span class="comment"></span>
<a name="l00395"></a>00395 <span class="comment">/**</span>
<a name="l00396"></a>00396 <span class="comment"> * @brief 見えない部品クラス(サーバサイドで使用)</span>
<a name="l00397"></a>00397 <span class="comment"> *</span>
<a name="l00398"></a>00398 <span class="comment"> * 見えないまたは表示しない部品クラス</span>
<a name="l00399"></a>00399 <span class="comment"> */</span>
<a name="l00400"></a><a class="code" href="class_s_blind_parts.html">00400</a> <span class="keyword">class </span><a class="code" href="class_s_blind_parts.html" title="見えない部品クラス(サーバサイドで使用)">SBlindParts</a> : <span class="keyword">public</span> <a class="code" href="class_s_parts.html" title="エンティティの部品クラス(サーバサイドで使用)">SParts</a>
<a name="l00401"></a>00401 {
<a name="l00402"></a>00402 <span class="keyword">public</span>:<span class="comment"></span>
<a name="l00403"></a>00403 <span class="comment">    /**</span>
<a name="l00404"></a>00404 <span class="comment">     * @brief コンストラクタ</span>
<a name="l00405"></a>00405 <span class="comment">     * @param name 部品名</span>
<a name="l00406"></a>00406 <span class="comment">     * @param pos 部品の中心位置</span>
<a name="l00407"></a>00407 <span class="comment">     */</span>
<a name="l00408"></a>00408 
<a name="l00409"></a>00409     <a class="code" href="class_s_blind_parts.html#ad3a53c06e0487e8eddf95e6df72a2108" title="コンストラクタ">SBlindParts</a>(<span class="keyword">const</span> <span class="keywordtype">char</span> *<a class="code" href="class_parts.html#af245eb5dd2bfcf0783634ec495bb4fa5" title="パーツ名の取得">name</a>, <span class="keyword">const</span> <a class="code" href="class_position.html" title="3次元位置クラス">Position</a> &amp;pos);
<a name="l00410"></a>00410 <span class="keyword">private</span>:
<a name="l00411"></a>00411     <span class="comment">// SParts implementation</span>
<a name="l00412"></a>00412     <span class="keywordtype">void</span> <span class="keyword">set</span>(dWorldID w, dSpaceID s);
<a name="l00413"></a>00413     <span class="comment">// Parts implementation</span>
<a name="l00414"></a>00414     <a class="code" href="class_parts_cmpnt.html" title="パーツを構成する要素インターフェース">PartsCmpnt</a> * extdata() { <span class="keywordflow">return</span> NULL; }
<a name="l00415"></a>00415 };
<a name="l00416"></a>00416 
<a name="l00417"></a>00417 <span class="preprocessor">#endif</span>
<a name="l00418"></a>00418 <span class="preprocessor"></span>
<a name="l00419"></a>00419 <span class="preprocessor">#endif // Parts_Server_h</span>
<a name="l00420"></a>00420 <span class="preprocessor"></span>
</pre></div></div>
<hr class="footer"/><address style="text-align: right;"><small>sigserverに対してWed Dec 14 14:29:18 2011に生成されました。&nbsp;
<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.6.3 </small></address>
</body>
</html>
