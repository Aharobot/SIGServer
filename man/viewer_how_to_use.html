<head>
<meta http-equiv="Content-Type" content="text/html; charset=Shift_JIS"/>
<link rel="stylesheet" type="text/css" href="prj.css"/>
<title>ビューアの操作</title>
</head>

<p><h1>ビューアの操作</h1>
<br>
<ul>
<li><a href="#起動画面">起動画面</a></li>
<li><a href="#メインウィンドウ">メインウィンドウ</a></li>
<li><a href="#サブウィンドウ">サブウィンドウ</a></li>
<li><a href="#画面下部パネル">画面下部パネル</a></li>
<li><a href="#画面右部パネル">画面右部パネル</a></li>
</ul>
<br>
<br>
<h2>
<a name="起動画面">
起動画面</a>
</h2>
<p>
<div align="center">
<img src="viewer_howto1.jpg" width="800" height="600">
<br>
</div>
<br>
<font size="4">
(1)　メインウィンドウ
</font>
<br>
<font size="4">
(2)　サブウィンドウ
</font>
<br>
<font size="4">
(3)　画面下パネル選択タブ
</font>
<br>
<font size="4">
(4)　画面右パネル選択タブ</font>
<br>
<p>以下に各部の簡単な説明を行います.</p>
<br>
<br>
<h2>
<a name="メインウィンドウ">
メインウィンドウ</a>
</h2>

<h3>視点の移動</h3>
マウスの右ボタンをクリックしながらドラッグすると，視点を移動できます<br>
<br>

<table border=1 align=center>
	<tr bgcolor="#cccccc">
		<th>操作</th>
		<th>SIGViewerの動作</th>
	</tr>
	<tr>
		<td>右ボタンを押しながらドラッグ</td>
		<td>視点の回転</td>
	</tr>
	<tr>
		<td>右ボタン＋SHIFTキーを押しながらドラッグ</td>
		<td>視点の移動（上下・左右）</td>
	</tr>
	<tr>
		<td>右ボタン＋CTRLキーを押しながらドラッグ</td>
		<td>視点の移動（奥行き）</td>
	</tr>
</table>

<br>
<br>

<h3>物体の選択</h3>
マウスを左クリックすると，カーソルの位置にある物体を選択できます．<br>
また，左クリックしたままマウスをドラッグすると，物体の移動，回転ができます．<br>
<br>

<table border=1 align=center>
	<tr bgcolor="#cccccc">
		<th>操作</th>
		<th>SIGViewerの動作</th>
	</tr>
	<tr>
		<td>左ボタンをクリック</td>
		<td>物体を選択</td>
	</tr>
	<tr>
		<td>左ボタンを押しながらドラッグ</td>
		<td>物体の回転</td>
	</tr>
	<tr>
		<td>左ボタン＋SHIFTキーを押しながらドラッグ</td>
		<td>物体の移動（上下・左右）</td>
	</tr>
	<tr>
		<td>左ボタン＋CTRLキーを押しながらドラッグ</td>
		<td>物体の移動（奥行き）</td>
	</tr>
</table>

<br>
<br>

<h2>
<a name="サブウィンドウ">
サブウィンドウ</a>
</h2>
マウスで選択したエージェントの視点から世界を眺めた画像が表示されます<br>
<br>
<div align="left">
<img src="viewer_howto2.jpg">
</div>
<br>
<br>

<p>
サブウィンドウは1つ（単眼視点）または2つ（複眼視点）表示できます．
この切り替えは設定ファイル(startup.cfg)により行います．
</p>

<h2>
<a name="画面下部パネル">
画面下部パネル</a>
</h2>

<h3>commタブ</h3>
サーバーとの通信操作を行います<br>
<br>
<div align="center">
<img src="viewer_howto_btab1.jpg" width="557" height="152">
</div>
<br>

<dl>
<dt>
<font size="4">
「server host name」エリア
</font>
<dd>
シミュレーションサーバーのホスト名を指定します．<br>
直接ホスト名を入力するか、ドロップダウンリストの中から選びます．<br>
</dl>
<br>

<dl>
<dt>
<font size="4">
「server port No」エリア
</font>
<dd>
シミュレーションサーバーのポート番号を指定します．<br>
直接ポート番号を入力するか、ドロップダウンリストの中から選びます．<br>
</dl>
<br>

<dl>
<dt>
<font size="4">
「Connect to SimServer」ボタン
</font>
<dd>
シミュレーションサーバーに接続します．<br>
</dl>
<br>

<dl>
<dt>
<font size="4">
「Disconnect SimServer」ボタン
</font>
<dd>
シミュレーションサーバーとの接続を切ります．<br>
</dl>
<br>

<dl>
<dt>
<font size="4">
「SIM_CTRL_CMD」エリア
</font>
<dd>
シミュレーションの開始、停止をします．<br>
ドロップダウンリストから「START」「STOP」等のコマンドを選び，「Send」ボタンを押すと，選択したコマンドがサーバーに送信されます．<br>
</dl>
<br>
<br>

<h3>messageタブ</h3>
エージェントの発話が表示されます<br>
<br>
<div align="center">
<img src="viewer_howto_btab2.jpg" width="630" height="140">
</div>
<br>
<br>

<h3>videoタブ</h3>
シミュレーション状況の録画・再生を行います<br>
<br>
<div align="center">
<img src="viewer_howto_btab3.jpg" width="620" height="158">
</div>

<dl>
<dt>
(1) ビデオファイル名入力エリア
<dd>
再生・録画対象となるビデオファイル名を入力します<br>
ビデオファイルの拡張子は.svd (SIGVerse Video形式 -- 独自フォーマット）です<br>
</dl>
<br>

<dl>
<dt>
(2) 「参照」ボタン
<dd>
ビデオファイルの名前を指定するダイアログが開きます．<br>
ファイルを選択すると、選択したファイルへのパスが(1)のビデオファイル名入力エリアに表示されます．<br>
</dl>
<br>

<dl>
<dt>
(3)「ロード」ボタン
<dd>
(1)のビデオファイル名入力エリアに書かれているビデオファイルをSIGViewerにロードします．<br>
</dl>
<br>

<dl>
<dt>
(4)ビデオ再生コントロール用ボタン
<dd>
(3)ボタンを押してロードしたビデオを再生します．<br>
再生開始、中断、巻き戻し、早送り等が行えます．<br>
</dl>
<br>

<dl>
<dt>
(5)「録画開始」「録画終了」ボタン
<dd>
「録画開始」を押すと，現在のシミュレーションの進行状況の記録を始めます．
「録画終了」を押すと，記録結果を(1)で指定したファイルにセーブします．
</dl>
<br>
<br>
<br>

<h3>syslogタブ</h3>
システムのログ情報が表示されます<br>
<br>
<div align="center">
<img src="viewer_howto_btab4.jpg" width="630" height="145">
</div>
<br>
<br>


<h2>
<a name="画面右部パネル">
画面右部パネル</a>
</h2>

<h3>Attributesタブ</h3>
エージェントの属性や，その他の情報が表示されます<br>

<dl>
<dt>
Attributes
<dd>
選択中のエージェントの属性が表示されます<br>
</dl>

<div align="left">
<img src="viewer_howto_rtab1.jpg">
</div>

<br>
表示される属性は、startup.cfgのATTR_NAMES_TO_SHOWで指定できます．<br>
（何も指定しない場合は、すべての属性が表示されます）<br>
<br>
<br>

<dl>
<dt>
Parts Attributes
<dd>
選択中のエージェントがOpenHRPヒューマノイド形状だった場合、選択した部位（腕、足など）の位置、向きが表示されます．（位置、向きの値は世界座標系における絶対座標）<br>
</dl>

<div align="left">
<img src="viewer_howto_rtab1a.jpg">
</div>

<br>
<br>

<dl>
<dt>
Detected Entities
<dd>
選択中のエージェントの視点から見える他のエージェントまたはエンティティの名前が表示されます<br>
</dl>

<div align="left">
<img src="viewer_howto_rtab2.jpg">
</div>

<br>
<br>

<dl>
<dt>
Camera Info
<dd>
メインカメラ（メインウィンドウの画像を映しているカメラ）の位置、方向が表示されます．<br>
この値を、startup.cfgのMAIN_CAMERA_INIT_POS, MAIN_CAMERA_INIT_DIRに設定すれば、任意の視点からの眺めで起動することができます．<br>
</dl>

<div align="left">
<img src="viewer_howto_rtab3.jpg">
</div>
<br>
<br>
<br>


<h3>Commandタブ</h3>
<br>

エージェントにコマンドを送信します．<br>
<br>
タブの直下にあるコンボボックスで、コントローラに送るメッセージが変わります.
現時点では「general」と「voice」の2つのタブがあります．<br>

<dl>
<dt>
general
<dd>
エージェントに任意のメッセージを送るためのパネルです<br>
</dl>

<div align="left">
<img src="viewer_howto_rtab4.jpg">
</div>

<br>
(1), (2), (3) メッセージの送信対象となるエージェント名を指定します．<br>
<br>
「送信対象選択」ボタンを押すと，エージェント選択モードになり，画面上のエージェントをクリックすると自動的にエージェントの名前が(2)に表示されます．<br>
または直接(2)にエージェント名をキーボードから入力しても構いません．<br>
<br>
「Broadcast」にチェックを入れた場合は、(2)に無関係にすべてのコントローラにメッセージがブロードキャストされます．<br>
<br>
<br>
(4) エージェントに送信するメッセージを入力するエリアです<br>
各行につき、1つの文字列になります<br>
<br>
<br>
(5) エージェント（のコントローラ）へメッセージを送ります．<br>
<br>
<br>
例えば上記の画面の例では, "move", "0", "10", "-140"の4つの文字列がtoy_D_000に送られます．<br>

<br>
<br>
<br>

<dl>
<dt>
voice
<dd>
エージェントに音声データを送るためのパネルです<br>
</dl>

<div align="left">
<img src="viewer_howto_rtab5a.jpg">
</div>

<br>
(1), (2) メッセージの送信対象となるエージェント名を指定します．<br>
<br>
「送信対象選択」ボタンを押すと，エージェント選択モードになり，画面上のエージェントをクリックすると自動的にエージェントの名前が(2)に表示されます．<br>
<br>
直接(2)にエージェント名をキーボードから入力しても構いません．<br>
<br>
(3) 「Rec Start」ボタンを押すと、マイクから音声取り込みを開始します．<br>
(4) 「Rec End」ボタンを押すと、マイクからの音声取り込みを終了し、取り込んだ音声データをcapture.wavというファイルにセーブします．<br>
(5) 「Send Voice」ボタンを押すと、エージェントに送信するwaveファイルを指定するファイル指定ダイアログが開きます．取り込んだcapture.wavファイルを指定してください．（または任意の.wavファイルを指定してエージェントに送信することもできます）<br>
<br>
送信された音声データはコントローラのonRecvSound()メソッドで受け取ることができます．<br>

